{"ast":null,"code":"/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as errorsExports from './error';\nexport var StringFormat = {\n  RAW: 'raw',\n  BASE64: 'base64',\n  BASE64URL: 'base64url',\n  DATA_URL: 'data_url'\n};\nexport function formatValidator(stringFormat) {\n  switch (stringFormat) {\n    case StringFormat.RAW:\n    case StringFormat.BASE64:\n    case StringFormat.BASE64URL:\n    case StringFormat.DATA_URL:\n      return;\n\n    default:\n      throw 'Expected one of the event types: [' + StringFormat.RAW + ', ' + StringFormat.BASE64 + ', ' + StringFormat.BASE64URL + ', ' + StringFormat.DATA_URL + '].';\n  }\n}\n/**\n * @struct\n */\n\nvar StringData =\n/** @class */\nfunction () {\n  function StringData(data, opt_contentType) {\n    this.data = data;\n    this.contentType = opt_contentType || null;\n  }\n\n  return StringData;\n}();\n\nexport { StringData };\nexport function dataFromString(format, string) {\n  switch (format) {\n    case StringFormat.RAW:\n      return new StringData(utf8Bytes_(string));\n\n    case StringFormat.BASE64:\n    case StringFormat.BASE64URL:\n      return new StringData(base64Bytes_(format, string));\n\n    case StringFormat.DATA_URL:\n      return new StringData(dataURLBytes_(string), dataURLContentType_(string));\n  } // assert(false);\n\n\n  throw errorsExports.unknown();\n}\nexport function utf8Bytes_(string) {\n  var b = [];\n\n  for (var i = 0; i < string.length; i++) {\n    var c = string.charCodeAt(i);\n\n    if (c <= 127) {\n      b.push(c);\n    } else {\n      if (c <= 2047) {\n        b.push(192 | c >> 6, 128 | c & 63);\n      } else {\n        if ((c & 64512) == 55296) {\n          // The start of a surrogate pair.\n          var valid = i < string.length - 1 && (string.charCodeAt(i + 1) & 64512) == 56320;\n\n          if (!valid) {\n            // The second surrogate wasn't there.\n            b.push(239, 191, 189);\n          } else {\n            var hi = c;\n            var lo = string.charCodeAt(++i);\n            c = 65536 | (hi & 1023) << 10 | lo & 1023;\n            b.push(240 | c >> 18, 128 | c >> 12 & 63, 128 | c >> 6 & 63, 128 | c & 63);\n          }\n        } else {\n          if ((c & 64512) == 56320) {\n            // Invalid low surrogate.\n            b.push(239, 191, 189);\n          } else {\n            b.push(224 | c >> 12, 128 | c >> 6 & 63, 128 | c & 63);\n          }\n        }\n      }\n    }\n  }\n\n  return new Uint8Array(b);\n}\nexport function percentEncodedBytes_(string) {\n  var decoded;\n\n  try {\n    decoded = decodeURIComponent(string);\n  } catch (e) {\n    throw errorsExports.invalidFormat(StringFormat.DATA_URL, 'Malformed data URL.');\n  }\n\n  return utf8Bytes_(decoded);\n}\nexport function base64Bytes_(format, string) {\n  switch (format) {\n    case StringFormat.BASE64:\n      {\n        var hasMinus = string.indexOf('-') !== -1;\n        var hasUnder = string.indexOf('_') !== -1;\n\n        if (hasMinus || hasUnder) {\n          var invalidChar = hasMinus ? '-' : '_';\n          throw errorsExports.invalidFormat(format, \"Invalid character '\" + invalidChar + \"' found: is it base64url encoded?\");\n        }\n\n        break;\n      }\n\n    case StringFormat.BASE64URL:\n      {\n        var hasPlus = string.indexOf('+') !== -1;\n        var hasSlash = string.indexOf('/') !== -1;\n\n        if (hasPlus || hasSlash) {\n          var invalidChar = hasPlus ? '+' : '/';\n          throw errorsExports.invalidFormat(format, \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\");\n        }\n\n        string = string.replace(/-/g, '+').replace(/_/g, '/');\n        break;\n      }\n  }\n\n  var bytes;\n\n  try {\n    bytes = atob(string);\n  } catch (e) {\n    throw errorsExports.invalidFormat(format, 'Invalid character found');\n  }\n\n  var array = new Uint8Array(bytes.length);\n\n  for (var i = 0; i < bytes.length; i++) {\n    array[i] = bytes.charCodeAt(i);\n  }\n\n  return array;\n}\n/**\n * @struct\n */\n\nvar DataURLParts =\n/** @class */\nfunction () {\n  function DataURLParts(dataURL) {\n    this.base64 = false;\n    this.contentType = null;\n    var matches = dataURL.match(/^data:([^,]+)?,/);\n\n    if (matches === null) {\n      throw errorsExports.invalidFormat(StringFormat.DATA_URL, \"Must be formatted 'data:[<mediatype>][;base64],<data>\");\n    }\n\n    var middle = matches[1] || null;\n\n    if (middle != null) {\n      this.base64 = endsWith(middle, ';base64');\n      this.contentType = this.base64 ? middle.substring(0, middle.length - ';base64'.length) : middle;\n    }\n\n    this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\n  }\n\n  return DataURLParts;\n}();\n\nexport function dataURLBytes_(string) {\n  var parts = new DataURLParts(string);\n\n  if (parts.base64) {\n    return base64Bytes_(StringFormat.BASE64, parts.rest);\n  } else {\n    return percentEncodedBytes_(parts.rest);\n  }\n}\nexport function dataURLContentType_(string) {\n  var parts = new DataURLParts(string);\n  return parts.contentType;\n}\n\nfunction endsWith(s, end) {\n  var longEnough = s.length >= end.length;\n\n  if (!longEnough) {\n    return false;\n  }\n\n  return s.substring(s.length - end.length) === end;\n}","map":{"version":3,"sources":["../src/implementation/string.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as errorsExports from './error';\nimport { errors } from './error';\n\n/**\n * @enum {string}\n */\nexport type StringFormat = string;\nexport const StringFormat = {\n  RAW: 'raw',\n  BASE64: 'base64',\n  BASE64URL: 'base64url',\n  DATA_URL: 'data_url'\n};\n\nexport function formatValidator(stringFormat: string) {\n  switch (stringFormat) {\n    case StringFormat.RAW:\n    case StringFormat.BASE64:\n    case StringFormat.BASE64URL:\n    case StringFormat.DATA_URL:\n      return;\n    default:\n      throw 'Expected one of the event types: [' +\n        StringFormat.RAW +\n        ', ' +\n        StringFormat.BASE64 +\n        ', ' +\n        StringFormat.BASE64URL +\n        ', ' +\n        StringFormat.DATA_URL +\n        '].';\n  }\n}\n\n/**\n * @struct\n */\nexport class StringData {\n  contentType: string | null;\n\n  constructor(public data: Uint8Array, opt_contentType?: string | null) {\n    this.contentType = opt_contentType || null;\n  }\n}\n\nexport function dataFromString(\n  format: StringFormat,\n  string: string\n): StringData {\n  switch (format) {\n    case StringFormat.RAW:\n      return new StringData(utf8Bytes_(string));\n    case StringFormat.BASE64:\n    case StringFormat.BASE64URL:\n      return new StringData(base64Bytes_(format, string));\n    case StringFormat.DATA_URL:\n      return new StringData(dataURLBytes_(string), dataURLContentType_(string));\n  }\n\n  // assert(false);\n  throw errorsExports.unknown();\n}\n\nexport function utf8Bytes_(string: string): Uint8Array {\n  let b = [];\n  for (let i = 0; i < string.length; i++) {\n    let c = string.charCodeAt(i);\n    if (c <= 127) {\n      b.push(c);\n    } else {\n      if (c <= 2047) {\n        b.push(192 | (c >> 6), 128 | (c & 63));\n      } else {\n        if ((c & 64512) == 55296) {\n          // The start of a surrogate pair.\n          let valid =\n            i < string.length - 1 &&\n            (string.charCodeAt(i + 1) & 64512) == 56320;\n          if (!valid) {\n            // The second surrogate wasn't there.\n            b.push(239, 191, 189);\n          } else {\n            let hi = c;\n            let lo = string.charCodeAt(++i);\n            c = 65536 | ((hi & 1023) << 10) | (lo & 1023);\n            b.push(\n              240 | (c >> 18),\n              128 | ((c >> 12) & 63),\n              128 | ((c >> 6) & 63),\n              128 | (c & 63)\n            );\n          }\n        } else {\n          if ((c & 64512) == 56320) {\n            // Invalid low surrogate.\n            b.push(239, 191, 189);\n          } else {\n            b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));\n          }\n        }\n      }\n    }\n  }\n  return new Uint8Array(b);\n}\n\nexport function percentEncodedBytes_(string: string): Uint8Array {\n  let decoded;\n  try {\n    decoded = decodeURIComponent(string);\n  } catch (e) {\n    throw errorsExports.invalidFormat(\n      StringFormat.DATA_URL,\n      'Malformed data URL.'\n    );\n  }\n  return utf8Bytes_(decoded);\n}\n\nexport function base64Bytes_(format: StringFormat, string: string): Uint8Array {\n  switch (format) {\n    case StringFormat.BASE64: {\n      let hasMinus = string.indexOf('-') !== -1;\n      let hasUnder = string.indexOf('_') !== -1;\n      if (hasMinus || hasUnder) {\n        let invalidChar = hasMinus ? '-' : '_';\n        throw errorsExports.invalidFormat(\n          format,\n          \"Invalid character '\" +\n            invalidChar +\n            \"' found: is it base64url encoded?\"\n        );\n      }\n      break;\n    }\n    case StringFormat.BASE64URL: {\n      let hasPlus = string.indexOf('+') !== -1;\n      let hasSlash = string.indexOf('/') !== -1;\n      if (hasPlus || hasSlash) {\n        let invalidChar = hasPlus ? '+' : '/';\n        throw errorsExports.invalidFormat(\n          format,\n          \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\"\n        );\n      }\n      string = string.replace(/-/g, '+').replace(/_/g, '/');\n      break;\n    }\n  }\n  let bytes;\n  try {\n    bytes = atob(string);\n  } catch (e) {\n    throw errorsExports.invalidFormat(format, 'Invalid character found');\n  }\n  let array = new Uint8Array(bytes.length);\n  for (let i = 0; i < bytes.length; i++) {\n    array[i] = bytes.charCodeAt(i);\n  }\n  return array;\n}\n\n/**\n * @struct\n */\nclass DataURLParts {\n  base64: boolean = false;\n  contentType: string | null = null;\n  rest: string;\n\n  constructor(dataURL: string) {\n    let matches = dataURL.match(/^data:([^,]+)?,/);\n    if (matches === null) {\n      throw errorsExports.invalidFormat(\n        StringFormat.DATA_URL,\n        \"Must be formatted 'data:[<mediatype>][;base64],<data>\"\n      );\n    }\n    let middle = matches[1] || null;\n    if (middle != null) {\n      this.base64 = endsWith(middle, ';base64');\n      this.contentType = this.base64\n        ? middle.substring(0, middle.length - ';base64'.length)\n        : middle;\n    }\n    this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\n  }\n}\n\nexport function dataURLBytes_(string: string): Uint8Array {\n  let parts = new DataURLParts(string);\n  if (parts.base64) {\n    return base64Bytes_(StringFormat.BASE64, parts.rest);\n  } else {\n    return percentEncodedBytes_(parts.rest);\n  }\n}\n\nexport function dataURLContentType_(string: string): string | null {\n  let parts = new DataURLParts(string);\n  return parts.contentType;\n}\n\nfunction endsWith(s: string, end: string): boolean {\n  const longEnough = s.length >= end.length;\n  if (!longEnough) {\n    return false;\n  }\n\n  return s.substring(s.length - end.length) === end;\n}\n"]},"metadata":{},"sourceType":"module"}